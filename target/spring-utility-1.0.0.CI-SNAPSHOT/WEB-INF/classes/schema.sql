DROP TABLE IF EXISTS BUG;
DROP TABLE IF EXISTS BUG_ASSIGNEE;

CREATE TABLE BUG (
	ID INT NOT NULL AUTO_INCREMENT
	, REPORTER VARCHAR(60) NOT NULL
	, TITLE VARCHAR(150) NOT NULL
	, CREATED_DATE DATE NOT NULL
	, PRIORITY INT NOT NULL
	, STATUS VARCHAR(60) NOT NULL
	, ASSIGNEE_ID VARCHAR(60) NOT NULL
	, UNIQUE UQ_BUG_1 (TITLE, CREATED_DATE)
	, PRIMARY KEY (ID)
);

CREATE TABLE BUG_ASSIGNEE (
	ID INT NOT NULL AUTO_INCREMENT
	, BUG_ID INT NOT NULL
	, ASSIGNEE_ID VARCHAR(60) NOT NULL
	, POSITION_TITLE VARCHAR(40) NOT NULL
	, PRIMARY KEY (ID)
	, CONSTRAINT FK_BUG_ASSIGNEE_1 FOREIGN KEY (BUG_ID, ASSIGNEE_ID) REFERENCES BUG (ID, ASSIGNEE_ID)
);

